!function(){"use strict";let e,d={};function s(){var e=this.id.includes("billing")?"billing":"shipping";jQuery("#sg_delivery_address_"+e+"_popup_window").addClass("show"),jQuery("#sg_delivery_address_"+e+"_popup_inner").addClass("show"),jQuery("#sg_delivery_address_"+e+"_popup_window").css("opacity","1"),jQuery("body").addClass("has-popup");let d=0;document.querySelectorAll("*").forEach((function(e){"fixed"!==window.getComputedStyle(e).position||e.id&&e.id.includes("sg_delivery_address_")||(d+=e.clientHeight)})),document.querySelectorAll("*").forEach((function(e){e.id.includes("sg_delivery_address_")&&e.id.includes("popup_panel")&&jQuery(e.parentNode).hasClass("show")&&(e.style.bottom=d+"px")}));for(const d of jQuery("#sg_delivery_address_"+e+"_create_form input"))d.id.includes("map")||"true"!==jQuery(d).attr("data-clear")||("radio"===d.type?jQuery(d).prop("checked",!1):d.value="",jQuery(".sg-field label[for="+d.id+"]").removeClass("active"));!function(e){let d,s;var t=document.getElementById("sg_delivery_address_"+e+"_picker_map");let l={lat:parseFloat(document.getElementById("sg_del_add_map_default_lat").value),lng:parseFloat(document.getElementById("sg_del_add_map_default_lng").value)};d=new google.maps.Map(t,{center:l,streetViewControl:!1,fullscreenControl:!1,mapTypeControl:!1,zoom:13}),s=new google.maps.Marker({position:l,map:d,draggable:!0}),"yes"===document.getElementById("sg_del_add_auto_detect_user_location").value&&navigator.geolocation&&navigator.geolocation.getCurrentPosition((t=>{l={},l={lat:t.coords.latitude,lng:t.coords.longitude},d.setCenter(l),s.setPosition(l),r(l,e)}),(e=>{}));new a(d).addEventListener("click",(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition((t=>{l={},l={lat:t.coords.latitude,lng:t.coords.longitude},d.setCenter(l),s.setPosition(l),r(l,e)}),(e=>{}))})),r(l,e),s.addListener("dragend",(d=>{r({lat:d.latLng.lat(),lng:d.latLng.lng()},e)}))}(e)}function t(e){let d="";void 0!==this?d=this.id.includes("billing")?"billing":"shipping":void 0!==d&&(d=e),jQuery("#sg_delivery_address_"+d+"_popup_inner").removeClass("show"),jQuery("body").removeClass("has-popup"),jQuery("#sg_delivery_address_"+d+"_popup_window").css("opacity","0"),jQuery(".sg-del-add-"+d+"-container")[0].scrollIntoView(),setTimeout((()=>{jQuery("#sg_delivery_address_"+d+"_popup_window").removeClass("show")}),350)}function r(e,s){let t=new google.maps.Geocoder,r=[...document.querySelectorAll("input")].filter((e=>!e.id.includes("sg_")));t.geocode({latLng:e},(t=>{if(t&&t.length>0){t[0].formatted_address.toLowerCase().includes("unnamed")||jQuery("#sg_delivery_address_"+s+"_new_address").parents(".sg-field").hasClass("has-error")&&(jQuery("#sg_delivery_address_"+s+"_new_address").parents(".sg-field").removeClass("has-error"),jQuery("#sg_delivery_address_"+s+"_new_address").siblings("span.sg-error").html(""));let a,l=[],n={};n.formatted_address=t[0].formatted_address;for(const e of t[0].address_components)e.types.includes("country")?(a=r.filter((e=>!0===e.id.includes("country")&&!0===e.id.includes(s))),a.length>0&&(a=a[0],document.getElementById(a.id).value=e.short_name),n.country={short_name:e?e.short_name:"",long_name:e?e.long_name:""}):e.types.includes("postal_code")?n.postcode={short_name:e?e.short_name:"",long_name:e?e.long_name:""}:e.types.includes("administrative_area_level_1")?n.state={short_name:e?e.short_name:"",long_name:e?e.long_name:""}:e.types.includes("administrative_area_level_3")?n.city={short_name:e?e.short_name:"",long_name:e?e.long_name:""}:l.push(e);let o=[],i=[];l.filter((e=>o.push(e.long_name)&&i.push(e.long_name))),o=o.join(", "),i=i.join(", "),n.address_1={short_name:i,long_name:o},d=n,d.position=e,document.getElementById("sg_delivery_address_"+s+"_new_address").value=d.formatted_address,document.getElementById("sg_delivery_address_"+s+"_new_lat").value=e.lat,document.getElementById("sg_delivery_address_"+s+"_new_lng").value=e.lng,document.querySelectorAll('label[for="sg_delivery_address_'+s+'_new_address"]')[0].classList.add("active")}}),(e=>{}))}function a(e){var d=document.createElement("div");d.classList="sg-locateme-control",d.index=1,e.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(d);var s=document.createElement("div");s.classList="sg-gm-user-locator",s.style.backgroundColor="#fff",s.style.border="2px solid #fff",s.style.borderRadius="3px",s.style.boxShadow="0 2px 6px rgba(0,0,0,.3)",s.style.cursor="pointer",s.style.marginBottom="22px",s.style.marginRight="10px",d.appendChild(s);var t=document.createElement("img");return t.style.padding="5px",t.width="35",t.height="35",t.src=document.getElementById("sg_del_add_map_user_locate_icon").value,s.appendChild(t),s}jQuery(document).ready((()=>{e=document.getElementById("sg_del_add_status").value,jQuery(".sg_del_add_hidden_fields").hide(),jQuery(".sg-del-add-add-new-opt").on("click",s),jQuery(".sg-del-add-overlay").on("click",t),jQuery(".sg-popup-close-button").on("click",(function(){t(jQuery(this).attr("data-type"))})),jQuery("#sg_delivery_address_billing_popup_panel").on("click",(e=>{e.stopImmediatePropagation()})),jQuery("#sg_delivery_address_shipping_popup_panel").on("click",(e=>{e.stopImmediatePropagation()})),jQuery(".sg-popup-footer .sg-submit-btn").on("click",(e=>{e.stopImmediatePropagation(),function(e){var s=[...jQuery("#sg_delivery_address_"+e+"_create_form input")];s="no"!==jQuery("#sg_del_add_unnamed_error_status").val()?s.filter((e=>jQuery(e).attr("required")&&(jQuery(e).val().toLowerCase().includes("unnamed")||""===jQuery(e).val()))):s.filter((e=>jQuery(e).attr("required")&&""===jQuery(e).val()));if(0===s.length)d.address_2=document.getElementById("sg_delivery_address_"+e+"_new_area").value,d.door=document.getElementById("sg_delivery_address_"+e+"_new_flat_no").value,d.landmark=document.getElementById("sg_delivery_address_"+e+"_new_landmark").value,function(e,d){let s=document.querySelectorAll("input");const t=["address_1","address_2","city","state","postcode","door","landmark","address_type","address_latitude","address_longitude","country"];for(const r of s)if(r.id.includes(d)&&!r.id.includes("sg"))for(const d of t)r.id.includes(d)&&("string"!=typeof e[d]?e[d]?d.includes("country")?r.value=e[d].short_name:r.value=e[d].long_name:e.position&&(d.includes("latitude")?r.value=e.position.lat:d.includes("longitude")&&(r.value=e.position.lng)):r.value=e[d]);jQuery("body").trigger("update_checkout");const r=jQuery(".sg-del-add-"+d+"-container").find(".sg-del-add-selected-address");""!==e.address_type&&jQuery(r).find(".sg-del-add-type").html(e.address_type);jQuery(r).find(".sg-del-add-description").html((""!==e.door?e.door+", ":"")+e.formatted_address),""!==e.address_2?(jQuery(r).find(".sg-del-add-area").show(),jQuery(r).find(".sg-del-add-area span").html(e.address_2)):jQuery(r).find(".sg-del-add-area").hide();""!==e.landmark?(jQuery(r).find(".sg-del-add-landmark").show(),jQuery(r).find(".sg-del-add-landmark span").html(e.landmark)):jQuery(r).find(".sg-del-add-landmark").hide();jQuery(".sg-del-add-"+d+"-container").find(".sg-del-address").slideToggle()}(d,e),t(e);else for(const d of s)d.id==="sg_delivery_address_"+e+"_new_address"&&(jQuery(d).parents(".sg-field").addClass("has-error"),jQuery(d).siblings("span.sg-error").html(jQuery("#sg_del_add_unnamed_error").val()))}(e.target.id.includes("billing")?"billing":"shipping")}));var r=[...jQuery(".sg-field input")].filter((e=>jQuery(e).attr("required")));for(const e of r)jQuery(e).on("input",(function(){this.value.split(" ").join("").length>0?jQuery(this).parents(".sg-field").hasClass("has-error")&&jQuery(this).parents(".sg-field").removeClass("has-error"):jQuery(this).parents(".sg-field").addClass("has-error")}));jQuery(".sg-field input").on("focus",(e=>{jQuery(".sg-field label[for="+e.target.id+"]").addClass("active")})),jQuery(".sg-field input").on("blur",(e=>{""===e.target.value&&jQuery(".sg-field label[for="+e.target.id+"]").removeClass("active")})),jQuery(document).on("click",".sg-menu-option",(e=>{jQuery(e.target).parents(".sg-dropdown").children(".sg-dropdown-list").hasClass("active")?jQuery(".sg-dropdown-list").removeClass("active"):(jQuery(".sg-dropdown-list").removeClass("active"),jQuery(e.target).parents(".sg-dropdown").children(".sg-dropdown-list").addClass("active"))})),document.addEventListener("click",(e=>{!jQuery(e.target).hasClass("sg-menu-option")&&jQuery(".sg-dropdown-list").hasClass("active")&&jQuery(".sg-dropdown-list").removeClass("active")})),jQuery(".sg-del-add-selected-address").on("click",s)})),jQuery(document).on("change",".addresses-section.sg-del-address-list input.sg-del-add-select",(e=>{jQuery(e.target).parents(".single-address").hasClass("removed")?sgmta_clear_addresses():sgmta_get_selected_address(e.target.value,jQuery(e.target).attr("data-type"))})),jQuery(document).on("click",".addresses-section.sg-del-address-list .available-address .action-container .sg-del-add-select-button",(e=>{!0===jQuery("input#"+jQuery(e.target).attr("for")).prop("checked")&&sgmta_get_selected_address(jQuery("input#"+jQuery(e.target).attr("for"))[0].value,jQuery("input#"+jQuery(e.target).attr("for")).attr("data-type"))}))}(jQuery);